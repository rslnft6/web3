<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <!-- ... (أضف أكواد الهيد السابقة) ... -->
    <script src="https://cdn.jsdelivr.net/npm/web3@1.6.1/dist/web3.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/web3.storage/dist/bundle.min.js"></script>
</head>
<body>
    <!-- ... (أضف أكواد البادي السابقة) ... -->
    <script>
        // تهيئة Web3
        let web3;
        if (typeof window.ethereum !== 'undefined') {
            web3 = new Web3(window.ethereum);
        }

        // دالة حفظ ملاحظة معدلة
        async function saveNote() {
            if (!web3) {
                alert('يرجى تثبيت MetaMask!');
                return;
            }
            
            // طلب الاتصال بالمحفظة
            await ethereum.request({ method: 'eth_requestAccounts' });
            
            const noteText = document.getElementById('noteInput').value;
            const accounts = await web3.eth.getAccounts();
            
            // دفع 0.001 ETH كرسوم تخزين
            await web3.eth.sendTransaction({
                from: accounts[0],
                to: '0xRecieverAddress',
                value: web3.utils.toWei('0.001', 'ether')
            });
            
            // ... (أكواد التخزين على IPFS السابقة) ...
        }
    </script>
</body>
</html>
